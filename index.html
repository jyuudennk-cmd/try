<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>10ç§’ææ¡ˆé›»å“</title>
    <style>
        :root {
            --primary: #cc0033; /* ãƒ‰ã‚³ãƒ¢ãƒ¬ãƒƒãƒ‰ */
            --primary-light: #ffe5ea;
            --bg: #f5f7fa;
            --text: #333;
            --card-bg: #fff;
            --accent: #0099cc; /* ææ¡ˆãƒ–ãƒ«ãƒ¼ */
            --android-green: #3DDC84; /* Androidã‚°ãƒªãƒ¼ãƒ³ */
            --iphone-black: #000000; /* iPhoneãƒ–ãƒ©ãƒƒã‚¯ */
        }
        body { font-family: "Helvetica Neue", Arial, sans-serif; background: var(--bg); margin: 0; color: var(--text); -webkit-user-select: none; padding-bottom: 50px; }
        
        header { background: var(--primary); color: white; padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h1 { margin: 0; font-size: 1.1rem; font-weight: bold; }
        
        .container { max-width: 500px; margin: 0 auto; padding: 15px; }
        
        /* ãƒ‡ãƒã‚¤ã‚¹åˆ‡æ›¿ã‚¹ã‚¤ãƒƒãƒï¼ˆiOSé¢¨ï¼‰ */
        .device-toggle-container {
            display: flex;
            background: #e0e0e0;
            border-radius: 30px;
            padding: 4px;
            margin-bottom: 20px;
            position: relative;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }
        .device-btn {
            flex: 1;
            text-align: center;
            padding: 10px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            z-index: 2;
            transition: color 0.3s;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        .device-btn.active {
            color: white;
        }
        
        /* ã‚¹ãƒ©ã‚¤ãƒ‰ã™ã‚‹èƒŒæ™¯ */
        .slider-bg {
            position: absolute;
            top: 4px;
            bottom: 4px;
            width: calc(50% - 4px);
            border-radius: 25px;
            background: var(--iphone-black);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            z-index: 1;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        /* Androidé¸æŠæ™‚ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ä½ç½® */
        .slider-bg.android-pos {
            left: 50%;
            background: var(--android-green);
        }
        .slider-bg.iphone-pos {
            left: 4px;
            background: var(--iphone-black);
        }

        /* å…¥åŠ›ã‚¨ãƒªã‚¢ */
        .input-section { background: var(--card-bg); padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 20px; text-align: center; }
        .input-label { font-size: 0.9rem; color: #666; margin-bottom: 10px; display: block; font-weight: bold; }
        .currency-input { font-size: 2rem; width: 80%; text-align: center; border: none; border-bottom: 2px solid var(--primary); outline: none; font-weight: bold; color: var(--text); background: transparent; }
        .currency-input::placeholder { color: #ccc; }
        
        /* æ¡ä»¶ã‚¹ã‚¤ãƒƒãƒ */
        .toggle-section { display: flex; gap: 10px; margin-bottom: 20px; justify-content: space-between; }
        .toggle-btn { flex: 1; background: #e0e0e0; padding: 12px 5px; border-radius: 8px; font-size: 0.8rem; font-weight: bold; color: #555; cursor: pointer; text-align: center; transition: 0.2s; border: 2px solid transparent; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 60px; }
        .toggle-btn.active { background: var(--primary-light); color: var(--primary); border-color: var(--primary); }
        .toggle-icon { font-size: 1.2rem; margin-bottom: 4px; display: block; }
        
        /* ãƒ—ãƒ©ãƒ³é¸æŠ */
        .plan-selector { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .plan-btn { background: white; border: 2px solid #ddd; padding: 15px; border-radius: 10px; text-align: center; cursor: pointer; transition: 0.2s; position: relative; }
        .plan-btn.selected { border-color: var(--primary); background: var(--primary-light); color: var(--primary); font-weight: bold; box-shadow: 0 4px 10px rgba(204, 0, 51, 0.2); transform: translateY(-2px); }
        .plan-name { font-size: 1rem; font-weight: bold; display: block; }
        .plan-desc { font-size: 0.7rem; color: #666; margin-top: 4px; display: block; }
        
        /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ */
        .result-section { background: white; border-radius: 16px; padding: 25px; text-align: center; box-shadow: 0 8px 20px rgba(0,0,0,0.1); border-top: 5px solid var(--accent); animation: popIn 0.5s ease; transition: border-color 0.3s; }
        
        /* ãƒ‡ãƒã‚¤ã‚¹åˆ¥ã®ãƒœãƒ¼ãƒ€ãƒ¼è‰²å¤‰æ›´ */
        .result-section.iphone-mode { border-top-color: var(--iphone-black); }
        .result-section.android-mode { border-top-color: var(--android-green); }

        .result-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 0.9rem; color: #555; }
        .new-price { font-size: 1.8rem; font-weight: bold; color: var(--text); }
        
        .diff-area { margin-top: 15px; padding-top: 15px; border-top: 1px dashed #ddd; }
        .diff-label { font-size: 0.9rem; color: var(--accent); font-weight: bold; margin-bottom: 5px; display: block; }
        .diff-value { font-size: 2.8rem; font-weight: 800; color: var(--accent); line-height: 1; }
        .diff-unit { font-size: 1rem; font-weight: bold; }
        
        /* ææ¡ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœãƒƒã‚¯ã‚¹ */
        .diff-msg { font-size: 0.95rem; margin-top: 15px; padding: 12px; border-radius: 8px; font-weight: bold; line-height: 1.4; transition: all 0.3s; }
        
        /* iPhoneæ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ã‚¿ã‚¤ãƒ« */
        .iphone-msg { background: #f0f0f0; color: #333; border-left: 5px solid #000; }
        /* Androidæ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¹ã‚¿ã‚¤ãƒ« */
        .android-msg { background: #e8f5e9; color: #2e7d32; border-left: 5px solid #3DDC84; }

        .recommend-badge { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 0.7rem; color: white; margin-bottom: 5px; background: #666; }

        /* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼ˆäººæ•°ï¼‰ */
        .slider-container { margin-bottom: 20px; background: white; padding: 15px; border-radius: 12px; }
        .slider-label { display: flex; justify-content: space-between; font-size: 0.9rem; font-weight: bold; margin-bottom: 10px; }
        input[type=range] { width: 100%; accent-color: var(--primary); cursor: pointer; }

        @keyframes popIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .reset-btn { background: #666; color: white; border: none; padding: 10px 20px; border-radius: 20px; margin-top: 20px; cursor: pointer; font-size: 0.9rem; }
    </style>
</head>
<body>

<header>
    <h1>10ç§’ææ¡ˆé›»å“</h1>
</header>

<div class="container">
    
    <div class="device-toggle-container">
        <div class="slider-bg iphone-pos" id="slider-bg"></div>
        <div class="device-btn active" id="btn-iphone" onclick="setDevice('iphone')">
            <span>ï£¿</span> ç¾åœ¨ iPhone
        </div>
        <div class="device-btn" id="btn-android" onclick="setDevice('android')">
            <span>ğŸ¤–</span> ç¾åœ¨ Android
        </div>
    </div>

    <div class="input-section">
        <label class="input-label">ç¾åœ¨ã®ãŠæ”¯æ‰•ã„é¡ï¼ˆæœˆé¡ï¼‰</label>
        <input type="tel" id="currentBill" class="currency-input" placeholder="ä¾‹: 12000" oninput="calculate()">
        <div style="font-size: 1.2rem; display:inline;">å††</div>
    </div>

    <div class="toggle-section">
        <div class="toggle-btn" id="btn-hikari" onclick="toggle('hikari')">
            <span class="toggle-icon">ğŸ </span>
            å…‰/home 5G
        </div>
        <div class="toggle-btn" id="btn-card" onclick="toggle('card')">
            <span class="toggle-icon">ğŸ’³</span>
            dã‚«ãƒ¼ãƒ‰
        </div>
    </div>

    <div class="slider-container">
        <div class="slider-label">
            <span>ã¿ã‚“ãªãƒ‰ã‚³ãƒ¢å‰²äººæ•°</span>
            <span id="family-count-display" style="color:var(--primary)">1äºº</span>
        </div>
        <input type="range" id="family-slider" min="1" max="3" value="1" step="1" oninput="updateFamily(this.value)">
        <div style="font-size:0.7rem; color:#888; text-align:right; margin-top:4px;">â€»3äººä»¥ä¸Šã§æœ€å¤§å‰²å¼•</div>
    </div>

    <div class="plan-selector">
        <div class="plan-btn selected" id="plan-max" onclick="selectPlan('max')">
            <span class="plan-name">ãƒ‰ã‚³ãƒ¢ MAX</span>
            <span class="plan-desc">ç„¡åˆ¶é™ãƒ»ä½¿ã„æ”¾é¡Œ</span>
        </div>
        <div class="plan-btn" id="plan-ahamo" onclick="selectPlan('ahamo')">
            <span class="plan-name">ahamo</span>
            <span class="plan-desc">30GB/5åˆ†é€šè©±</span>
        </div>
        <div class="plan-btn" id="plan-mini" onclick="selectPlan('mini')">
            <span class="plan-name">ãƒ‰ã‚³ãƒ¢ mini</span>
            <span class="plan-desc">3GBãƒ»ãƒ©ã‚¤ãƒˆ</span>
        </div>
        <div class="plan-btn" id="plan-eximo" onclick="selectPlan('eximo')">
            <span class="plan-name">eximo</span>
            <span class="plan-desc">ã€œç„¡åˆ¶é™</span>
        </div>
    </div>

    <div class="result-section iphone-mode" id="result-box">
        <div class="result-row">
            <span>ãƒ‰ã‚³ãƒ¢æ–°æ–™é‡‘:</span>
            <span class="new-price"><span id="newPrice">---</span> <span style="font-size:1rem">å††</span></span>
        </div>
        
        <div class="diff-area">
            <span class="diff-label">æ¯æœˆã®æµ®ããŠé‡‘ï¼ˆå·®é¡ï¼‰</span>
            <div class="diff-value">
                <span id="diffPrice">0</span>
                <span class="diff-unit">å††</span>
            </div>
            
            <div class="diff-msg iphone-msg" id="diffMsg">
                ç¾åœ¨ã®æ–™é‡‘ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            </div>
        </div>
        <div style="margin-top:15px; font-size:0.8rem; color:#999;">â€»é‡‘é¡ã¯ç¨è¾¼æ¦‚ç®—ã§ã™ã€‚åˆ¥é€”ãƒ¦ãƒ‹ãƒæ–™ç­‰ãŒã‹ã‹ã‚Šã¾ã™ã€‚</div>
        
        <button class="reset-btn" onclick="resetAll()">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>

</div>

<script>
    // â–  è¨­å®šå€¤ï¼ˆ2026å¹´æƒ³å®šï¼‰
    const CONFIG = {
        plans: {
            max: 7650,   // ãƒ‰ã‚³ãƒ¢MAX
            eximo: 7315, // eximo
            ahamo: 2970, // ahamo 30GB
            mini: 2167   // mini 3GB
        },
        discounts: {
            hikari: 1210,
            family_3: 1210,
            family_2: 550,
            dcard: 187,
            dcard_mini: 550
        },
        // â– ç«¯æœ«å®Ÿè³ªè² æ‹…é¡ã®ç›®å®‰ï¼ˆã‚«ã‚¨ãƒ‰ã‚­ãƒ—ãƒ­ã‚°ãƒ©ãƒ æƒ³å®šï¼‰
        devices: {
            iphone17_pro: 4500, // æœˆé¡ç›®å®‰
            iphone17: 2800,     // æœˆé¡ç›®å®‰
            pixel9a: 1200       // æœˆé¡ç›®å®‰ï¼ˆå®‰ã„ï¼ï¼‰
        }
    };

    let state = {
        currentBill: 0,
        plan: 'max',
        hikari: false,
        dcard: false,
        family: 1,
        deviceType: 'iphone' // 'iphone' or 'android'
    };

    // ãƒ‡ãƒã‚¤ã‚¹åˆ‡æ›¿å‡¦ç†
    function setDevice(type) {
        state.deviceType = type;
        
        // UIæ›´æ–°ï¼ˆã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
        const slider = document.getElementById('slider-bg');
        const btnIphone = document.getElementById('btn-iphone');
        const btnAndroid = document.getElementById('btn-android');
        const resultBox = document.getElementById('result-box');
        const diffMsg = document.getElementById('diffMsg');

        if (type === 'iphone') {
            slider.classList.remove('android-pos');
            slider.classList.add('iphone-pos');
            btnIphone.classList.add('active');
            btnAndroid.classList.remove('active');
            
            resultBox.classList.remove('android-mode');
            resultBox.classList.add('iphone-mode');
            
            diffMsg.classList.remove('android-msg');
            diffMsg.classList.add('iphone-msg');
        } else {
            slider.classList.remove('iphone-pos');
            slider.classList.add('android-pos');
            btnAndroid.classList.add('active');
            btnIphone.classList.remove('active');

            resultBox.classList.remove('iphone-mode');
            resultBox.classList.add('android-mode');

            diffMsg.classList.remove('iphone-msg');
            diffMsg.classList.add('android-msg');
        }
        calculate();
    }

    function toggle(key) {
        state[key] = !state[key];
        document.getElementById(`btn-${key}`).classList.toggle('active');
        calculate();
    }

    function updateFamily(val) {
        state.family = parseInt(val);
        document.getElementById('family-count-display').textContent = val >= 3 ? "3äººä»¥ä¸Š" : val + "äºº";
        calculate();
    }

    function selectPlan(planKey) {
        state.plan = planKey;
        document.querySelectorAll('.plan-btn').forEach(el => el.classList.remove('selected'));
        document.getElementById(`plan-${planKey}`).classList.add('selected');
        calculate();
    }

    function calculate() {
        const inputVal = document.getElementById('currentBill').value;
        state.currentBill = inputVal ? parseInt(inputVal) : 0;

        let basePrice = CONFIG.plans[state.plan];
        let discountTotal = 0;

        if (state.plan === 'ahamo') {
            discountTotal = 0;
        } else if (state.plan === 'mini') {
            if (state.hikari) discountTotal += CONFIG.discounts.hikari;
            if (state.dcard) discountTotal += CONFIG.discounts.dcard_mini;
        } else {
            if (state.hikari) discountTotal += CONFIG.discounts.hikari;
            if (state.dcard) discountTotal += CONFIG.discounts.dcard;
            if (state.family >= 3) discountTotal += CONFIG.discounts.family_3;
            else if (state.family == 2) discountTotal += CONFIG.discounts.family_2;
        }

        const finalPrice = Math.max(0, basePrice - discountTotal);
        const diff = state.currentBill - finalPrice;

        document.getElementById('newPrice').textContent = finalPrice.toLocaleString();
        
        const diffEl = document.getElementById('diffPrice');
        const msgEl = document.getElementById('diffMsg');

        if (state.currentBill > 0) {
            diffEl.textContent = diff.toLocaleString();
            
            if (diff > 0) {
                // â–  ææ¡ˆãƒ­ã‚¸ãƒƒã‚¯åˆ†å²ï¼ˆã“ã“ãŒé‡è¦ï¼‰
                let msg = "";
                
                if (state.deviceType === 'iphone') {
                    // iPhoneãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ææ¡ˆï¼ˆiPhone 17æ¨ã—ï¼‰
                    if (diff >= CONFIG.devices.iphone17_pro) {
                        msg = `<span class="recommend-badge">RECOMMEND</span><br>æµ®ã„ãŸãŠé‡‘ã§ <strong>iPhone 17 Pro</strong> ãŒå®Ÿè³ªè² æ‹…0å††ã§æŒã¦ã¾ã™ï¼`;
                    } else if (diff >= CONFIG.devices.iphone17) {
                        msg = `<span class="recommend-badge">RECOMMEND</span><br><strong>iPhone 17</strong> (ç„¡å°) ã®åˆ†å‰²ä»£ãŒãƒãƒ£ãƒ©ã«ãªã‚Šã¾ã™ï¼`;
                    } else if (diff >= 1000) {
                        msg = `<strong>iPhone 17</strong> ã®åˆ†å‰²è² æ‹…ã‚’<br>æœˆã€… ${diff}å†† ã‚‚æ¸›ã‚‰ã›ã¾ã™ï¼`;
                    } else {
                        msg = "ã‚¢ã‚¯ã‚»ã‚µãƒªã‚„iCloudå®¹é‡ã®è¶³ã—ã«ãªã‚Šã¾ã™ï¼";
                    }
                } else {
                    // Androidãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ææ¡ˆï¼ˆPixel 9aæ¨ã—ï¼‰
                    if (diff >= 2000) {
                        msg = `<span class="recommend-badge">RECOMMEND</span><br>æµ®ã„ãŸãŠé‡‘ã§ <strong>Pixel 9a</strong> ã‚’æŒã£ã¦ã‚‚ãŠé‡£ã‚ŠãŒæ¥ã¾ã™ï¼`;
                    } else if (diff >= CONFIG.devices.pixel9a) {
                        msg = `<span class="recommend-badge">RECOMMEND</span><br><strong>Pixel 9a</strong> ãŒå®Ÿè³ªè² æ‹…0å††ã§æŒã¦ã¾ã™ï¼`;
                    } else {
                        msg = `<strong>Pixel 9a</strong> ã®åˆ†å‰²è² æ‹…ã‚’<br>å¤§å¹…ã«æ¸›ã‚‰ã›ã¾ã™ï¼`;
                    }
                }

                diffEl.style.color = state.deviceType === 'iphone' ? "#000" : "#2e7d32";
                msgEl.innerHTML = msg;

            } else {
                diffEl.style.color = "#cc0033"; 
                msgEl.textContent = "æ–™é‡‘ã¯ä¸ŠãŒã‚Šã¾ã™ãŒã€é€šä¿¡å“è³ª/ã‚µãƒãƒ¼ãƒˆãŒå‘ä¸Šã—ã¾ã™ã€‚";
            }
        } else {
            diffEl.textContent = "0";
            diffEl.style.color = "#ccc";
            msgEl.textContent = "ç¾åœ¨ã®æ–™é‡‘ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€æœ€é©ãªç«¯æœ«ææ¡ˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™";
        }
    }

    function resetAll() {
        document.getElementById('currentBill').value = '';
        state.currentBill = 0;
        state.hikari = false;
        state.dcard = false;
        state.family = 1;
        
        document.getElementById('btn-hikari').classList.remove('active');
        document.getElementById('btn-card').classList.remove('active');
        document.getElementById('family-slider').value = 1;
        document.getElementById('family-count-display').textContent = "1äºº";
        
        selectPlan('max'); 
        setDevice('iphone'); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™
    }

    calculate();
</script>

</body>
</html>