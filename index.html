<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>10ç§’ææ¡ˆé›»å“</title>
    <style>
        :root {
            --primary: #cc0033; /* ãƒ‰ã‚³ãƒ¢ãƒ¬ãƒƒãƒ‰ */
            --primary-light: #ffe5ea;
            --bg: #f5f7fa;
            --text: #333;
            --card-bg: #fff;
            --accent: #0099cc; /* ææ¡ˆãƒ–ãƒ«ãƒ¼ */
            --alert: #ff9800; /* æ³¨æ„å–šèµ· */
        }
        body { font-family: "Helvetica Neue", Arial, sans-serif; background: var(--bg); margin: 0; color: var(--text); -webkit-user-select: none; padding-bottom: 60px; }
        
        header { background: var(--primary); color: white; padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h1 { margin: 0; font-size: 1.1rem; font-weight: bold; }
        
        .container { max-width: 500px; margin: 0 auto; padding: 15px; }
        
        /* å…¥åŠ›ã‚¨ãƒªã‚¢ */
        .input-group { display: flex; gap: 10px; margin-bottom: 20px; }
        .input-section { flex: 1; background: var(--card-bg); padding: 15px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); text-align: center; }
        
        .input-label { font-size: 0.8rem; color: #666; margin-bottom: 8px; display: block; font-weight: bold; }
        .currency-input { font-size: 1.6rem; width: 100%; text-align: center; border: none; border-bottom: 2px solid var(--primary); outline: none; font-weight: bold; color: var(--text); background: transparent; padding-bottom: 5px; }
        .currency-input::placeholder { color: #ccc; font-size: 1.2rem; }
        .unit { font-size: 0.9rem; color: #666; margin-left: 2px; }

        /* æ¡ä»¶ã‚¹ã‚¤ãƒƒãƒç¾¤ */
        .toggle-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        
        .toggle-btn { background: #e0e0e0; padding: 12px 5px; border-radius: 8px; font-size: 0.75rem; font-weight: bold; color: #555; cursor: pointer; text-align: center; transition: 0.2s; border: 2px solid transparent; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 50px; }
        .toggle-btn.active { background: var(--primary-light); color: var(--primary); border-color: var(--primary); }
        
        /* é¸æŠè‚¢ãƒœã‚¿ãƒ³ï¼ˆdã‚«ãƒ¼ãƒ‰/é•·æœŸï¼‰ */
        .select-group { grid-column: span 2; display: flex; gap: 5px; background: #fff; padding: 5px; border-radius: 8px; margin-bottom: 5px; }
        .select-btn { flex: 1; padding: 8px; text-align: center; font-size: 0.75rem; background: #f0f0f0; border-radius: 6px; cursor: pointer; color: #666; font-weight: bold; }
        .select-btn.selected { background: var(--primary); color: white; }

        /* ãƒ—ãƒ©ãƒ³é¸æŠ */
        .plan-selector { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .plan-btn { background: white; border: 2px solid #ddd; padding: 15px; border-radius: 10px; text-align: center; cursor: pointer; transition: 0.2s; position: relative; }
        .plan-btn.selected { border-color: var(--primary); background: var(--primary-light); color: var(--primary); font-weight: bold; box-shadow: 0 4px 10px rgba(204, 0, 51, 0.2); transform: translateY(-2px); }
        .plan-name { font-size: 1rem; font-weight: bold; display: block; }
        .plan-desc { font-size: 0.7rem; color: #666; margin-top: 4px; display: block; }
        
        /* å®¹é‡ä¸è¶³ã‚¢ãƒ©ãƒ¼ãƒˆ */
        .cap-alert { display: none; background: #fff3e0; color: #ef6c00; font-size: 0.7rem; padding: 2px; border-radius: 4px; margin-top: 4px; font-weight: bold; }
        .plan-btn.capacity-over .cap-alert { display: block; }
        .plan-btn.capacity-over { opacity: 0.7; border-color: #ffcc80; }

        /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ */
        .result-section { background: white; border-radius: 16px; padding: 25px; text-align: center; box-shadow: 0 8px 20px rgba(0,0,0,0.1); border-top: 5px solid var(--accent); transition: all 0.3s; }
        .new-price { font-size: 2rem; font-weight: bold; color: var(--text); }
        
        .diff-area { margin-top: 15px; padding-top: 15px; border-top: 1px dashed #ddd; }
        .diff-label { font-size: 0.9rem; color: var(--accent); font-weight: bold; margin-bottom: 5px; display: block; }
        .diff-value { font-size: 2.8rem; font-weight: 800; color: var(--accent); line-height: 1; }
        
        .diff-msg { font-size: 0.9rem; margin-top: 15px; padding: 10px; border-radius: 8px; font-weight: bold; line-height: 1.4; background: #f0f0f0; color: #666; }

        /* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼ˆäººæ•°ï¼‰ */
        .slider-container { margin-bottom: 20px; background: white; padding: 15px; border-radius: 12px; }
        .slider-label { display: flex; justify-content: space-between; font-size: 0.9rem; font-weight: bold; margin-bottom: 10px; }
        input[type=range] { width: 100%; accent-color: var(--primary); cursor: pointer; }

        .reset-btn { background: #666; color: white; border: none; padding: 10px 20px; border-radius: 20px; margin-top: 20px; cursor: pointer; font-size: 0.9rem; }
    </style>
</head>
<body>

<header>
    <h1>10ç§’ææ¡ˆé›»å“</h1>
</header>

<div class="container">
    
    <div class="input-group">
        <div class="input-section">
            <label class="input-label">ç¾åœ¨ã®æ–™é‡‘</label>
            <input type="tel" id="currentBill" class="currency-input" placeholder="0" oninput="calculate()">
            <span class="unit">å††</span>
        </div>
        <div class="input-section">
            <label class="input-label">ä½¿ç”¨ãƒ‡ãƒ¼ã‚¿é‡</label>
            <input type="tel" id="currentGB" class="currency-input" placeholder="0" oninput="checkCapacity()">
            <span class="unit">GB</span>
        </div>
    </div>

    <div class="toggle-grid">
        <div class="toggle-btn" id="btn-hikari" onclick="toggle('hikari')">
            <span>ğŸ  å…‰/home 5G</span>
            <span style="font-size:0.7rem">(-1,210å††)</span>
        </div>
        
        <div class="toggle-btn" id="btn-denki" onclick="toggle('denki')">
            <span>âš¡ï¸ ã§ã‚“ã</span>
            <span style="font-size:0.7rem">(-110å††)</span>
        </div>

        <div class="select-group">
            <div class="select-btn selected" onclick="setDCard('none')">ã‚«ãƒ¼ãƒ‰ãªã—</div>
            <div class="select-btn" onclick="setDCard('regular')">ä¸€èˆ¬(-220)</div>
            <div class="select-btn" onclick="setDCard('gold')">GOLD(-550)</div>
        </div>

        <div class="select-group">
            <div class="select-btn selected" onclick="setLongTerm('none')">é•·æœŸãªã—</div>
            <div class="select-btn" onclick="setLongTerm('10y')">10å¹´è¶…(-110)</div>
            <div class="select-btn" onclick="setLongTerm('20y')">20å¹´è¶…(-220)</div>
        </div>
    </div>

    <div class="slider-container">
        <div class="slider-label">
            <span>ã¿ã‚“ãªãƒ‰ã‚³ãƒ¢å‰²äººæ•°</span>
            <span id="family-count-display" style="color:var(--primary)">1äºº</span>
        </div>
        <input type="range" id="family-slider" min="1" max="3" value="1" step="1" oninput="updateFamily(this.value)">
        <div style="font-size:0.7rem; color:#888; text-align:right; margin-top:4px;">â€»MAXã®ã¿é©ç”¨ (-550å†† / -1,210å††)</div>
    </div>

    <div class="plan-selector">
        <div class="plan-btn selected" id="plan-max" onclick="selectPlan('max')">
            <span class="plan-name">ãƒ‰ã‚³ãƒ¢ MAX</span>
            <span class="plan-desc">ç„¡åˆ¶é™ãƒ»å…¨éƒ¨å…¥ã‚Š</span>
            <div class="cap-alert">æ¨å¥¨</div>
        </div>
        <div class="plan-btn" id="plan-ahamo" onclick="selectPlan('ahamo')">
            <span class="plan-name">ahamo</span>
            <span class="plan-desc">30GBãƒ»å‰²å¼•ãªã—</span>
            <div class="cap-alert">å®¹é‡ä¸è¶³</div>
        </div>
        <div class="plan-btn" id="plan-mini10" onclick="selectPlan('mini10')">
            <span class="plan-name">mini 10GB</span>
            <span class="plan-desc">ãƒ©ã‚¤ãƒˆ</span>
            <div class="cap-alert">å®¹é‡ä¸è¶³</div>
        </div>
        <div class="plan-btn" id="plan-mini4" onclick="selectPlan('mini4')">
            <span class="plan-name">mini 4GB</span>
            <span class="plan-desc">æœ€å®‰</span>
            <div class="cap-alert">å®¹é‡ä¸è¶³</div>
        </div>
    </div>

    <div class="result-section" id="result-box">
        <div class="result-row">
            <span>ãƒ‰ã‚³ãƒ¢æ–°æ–™é‡‘:</span>
            <span class="new-price"><span id="newPrice">---</span> <span style="font-size:1rem">å††</span></span>
        </div>
        
        <div class="diff-area">
            <span class="diff-label">æ¯æœˆã®æµ®ããŠé‡‘ï¼ˆå·®é¡ï¼‰</span>
            <div class="diff-value">
                <span id="diffPrice">0</span>
                <span class="diff-unit">å††</span>
            </div>
            <div class="diff-msg" id="diffMsg">ç¾åœ¨ã®æ–™é‡‘ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
        </div>
        
        <button class="reset-btn" onclick="resetAll()">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>

</div>

<script>
    // â–  æ–™é‡‘å®šç¾©ï¼ˆ2026å¹´2æœˆæ”¹å®šç‰ˆï¼‰
    const CONFIG = {
        plans: {
            max: 8448,     // ãƒ‰ã‚³ãƒ¢MAX
            ahamo: 2970,   // ahamo (30GB)
            mini10: 3850,  // mini 10GB
            mini4: 2750    // mini 4GB
        },
        caps: {
            max: 9999,
            ahamo: 30,
            mini10: 10,
            mini4: 4
        },
        discounts: {
            hikari: 1210,     // å…‰ã‚»ãƒƒãƒˆå‰²
            family_3: 1210,   // å®¶æ—3äººä»¥ä¸Šï¼ˆMAXã®ã¿ï¼‰
            family_2: 550,    // å®¶æ—2äººï¼ˆMAXã®ã¿ï¼‰
            denki: 110,       // ã§ã‚“ãå‰²
            // dã‚«ãƒ¼ãƒ‰å‰²
            dcard_gold: 550,
            dcard_reg: 220,
            // é•·æœŸç‰¹å…¸
            long_20y: 220,
            long_10y: 110
        }
    };

    let state = {
        currentBill: 0,
        currentGB: 0,
        plan: 'max',
        hikari: false,
        denki: false,
        dcardType: 'none',   // none, regular, gold
        longTerm: 'none',    // none, 10y, 20y
        family: 1
    };

    function toggle(key) {
        state[key] = !state[key];
        document.getElementById(`btn-${key}`).classList.toggle('active');
        calculate();
    }

    function setDCard(type) {
        state.dcardType = type;
        // UIæ›´æ–°
        document.querySelectorAll('.select-group:nth-of-type(3) .select-btn').forEach(el => el.classList.remove('selected'));
        event.target.classList.add('selected');
        calculate();
    }

    function setLongTerm(type) {
        state.longTerm = type;
        // UIæ›´æ–°
        document.querySelectorAll('.select-group:nth-of-type(4) .select-btn').forEach(el => el.classList.remove('selected'));
        event.target.classList.add('selected');
        calculate();
    }

    function updateFamily(val) {
        state.family = parseInt(val);
        document.getElementById('family-count-display').textContent = val >= 3 ? "3äººä»¥ä¸Š" : val + "äºº";
        calculate();
    }

    function selectPlan(planKey) {
        state.plan = planKey;
        document.querySelectorAll('.plan-btn').forEach(el => el.classList.remove('selected'));
        document.getElementById(`plan-${planKey}`).classList.add('selected');
        calculate();
    }

    function checkCapacity() {
        const inputGB = document.getElementById('currentGB').value;
        state.currentGB = inputGB ? parseFloat(inputGB) : 0;

        ['ahamo', 'mini10', 'mini4'].forEach(key => {
            const btn = document.getElementById(`plan-${key}`);
            const limit = CONFIG.caps[key];
            if (state.currentGB > limit) btn.classList.add('capacity-over');
            else btn.classList.remove('capacity-over');
        });
        calculate();
    }

    function calculate() {
        const inputVal = document.getElementById('currentBill').value;
        state.currentBill = inputVal ? parseInt(inputVal) : 0;

        let basePrice = CONFIG.plans[state.plan];
        let discountTotal = 0;

        // â–  å‰²å¼•è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå³å¯†åŒ–ï¼‰
        if (state.plan === 'ahamo') {
            // ahamo: å‰²å¼•ãªã—
            discountTotal = 0;
        } else {
            // å…±é€šå‰²å¼•ï¼ˆå…‰ãƒ»ã§ã‚“ããƒ»dã‚«ãƒ¼ãƒ‰ï¼‰
            if (state.hikari) discountTotal += CONFIG.discounts.hikari;
            if (state.denki) discountTotal += CONFIG.discounts.denki;
            
            if (state.dcardType === 'gold') discountTotal += CONFIG.discounts.dcard_gold;
            else if (state.dcardType === 'regular') discountTotal += CONFIG.discounts.dcard_reg;

            // MAXå°‚ç”¨å‰²å¼•ï¼ˆå®¶æ—ãƒ»é•·æœŸï¼‰
            if (state.plan === 'max') {
                if (state.family >= 3) discountTotal += CONFIG.discounts.family_3;
                else if (state.family == 2) discountTotal += CONFIG.discounts.family_2;

                if (state.longTerm === '20y') discountTotal += CONFIG.discounts.long_20y;
                else if (state.longTerm === '10y') discountTotal += CONFIG.discounts.long_10y;
            }
            // mini: å®¶æ—å‰²ãƒ»é•·æœŸå‰²ã¯é©ç”¨å¤–
        }

        const finalPrice = Math.max(0, basePrice - discountTotal);
        const diff = state.currentBill - finalPrice;

        document.getElementById('newPrice').textContent = finalPrice.toLocaleString();
        
        const diffEl = document.getElementById('diffPrice');
        const msgEl = document.getElementById('diffMsg');
        const currentLimit = CONFIG.caps[state.plan];
        const isCapOver = state.currentGB > currentLimit;

        if (state.currentBill > 0) {
            diffEl.textContent = diff.toLocaleString();
            
            if (isCapOver) {
                diffEl.style.color = "#ff9800";
                msgEl.style.background = "#fff3e0";
                msgEl.style.color = "#ef6c00";
                msgEl.innerHTML = `âš ï¸ <strong>å®¹é‡ä¸è¶³ã®æã‚Œã‚ã‚Š</strong><br>ç¾åœ¨${state.currentGB}GBä½¿ç”¨ä¸­ã§ã™ãŒã€ãƒ—ãƒ©ãƒ³ä¸Šé™ã¯${currentLimit}GBã§ã™ã€‚`;
            } else if (diff > 0) {
                diffEl.style.color = "#0099cc";
                msgEl.style.background = "#e6f7ff";
                msgEl.style.color = "#006699";
                if (diff >= 3000) msgEl.innerHTML = "âœ¨ <strong>å¤§å¹…ç¯€ç´„ï¼</strong><br>æœ€æ–°æ©Ÿç¨®ã¸ã®å¤‰æ›´ã‚‚ã”æ¤œè¨ã„ãŸã ã‘ã¾ã™ï¼";
                else msgEl.innerHTML = "ãŠãƒˆã‚¯ã«ãªã‚Šã¾ã™ï¼<br>ã‚¢ã‚¯ã‚»ã‚µãƒªã‚„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å……å®Ÿã«ã€‚";
            } else {
                diffEl.style.color = "#cc0033"; 
                msgEl.style.background = "#ffe5ea";
                msgEl.style.color = "#cc0033";
                msgEl.textContent = "æ–™é‡‘ã¯ä¸ŠãŒã‚Šã¾ã™ãŒã€å®‰å¿ƒæ„Ÿãƒ»ã‚µãƒãƒ¼ãƒˆãŒå‘ä¸Šã—ã¾ã™ã€‚";
            }
        } else {
            diffEl.textContent = "0";
            diffEl.style.color = "#ccc";
            msgEl.textContent = "ç¾åœ¨ã®æ–™é‡‘ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„";
            msgEl.style.background = "#f0f0f0";
            msgEl.style.color = "#999";
        }
    }

    function resetAll() {
        document.getElementById('currentBill').value = '';
        document.getElementById('currentGB').value = '';
        state.currentBill = 0;
        state.currentGB = 0;
        state.hikari = false;
        state.denki = false;
        state.dcardType = 'none';
        state.longTerm = 'none';
        state.family = 1;
        
        document.getElementById('btn-hikari').classList.remove('active');
        document.getElementById('btn-denki').classList.remove('active');
        document.getElementById('family-slider').value = 1;
        document.getElementById('family-count-display').textContent = "1äºº";
        
        // ãƒœã‚¿ãƒ³é¸æŠçŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ
        document.querySelectorAll('.select-btn').forEach(el => el.classList.remove('selected'));
        document.querySelector('.select-group:nth-of-type(3) .select-btn:first-child').classList.add('selected'); // card none
        document.querySelector('.select-group:nth-of-type(4) .select-btn:first-child').classList.add('selected'); // long none

        selectPlan('max'); 
        checkCapacity();
    }

    calculate();
</script>

</body>
</html>
